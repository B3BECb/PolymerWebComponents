<!DOCTYPE html>
<html id = "pageLogin">
<head>
	<script src = "ReferenceAssembler.js"
			type = "text/javascript"></script>
</head>
<body>
<custom-element></custom-element>
<validable-input id = "vi"
				 title = "abc"
				 validator = "value && value.trim() ? true : false"
				 error-text = "123"
				 noCollapse></validable-input>
<div
		style = "position: relative;
		height: 48px;
		padding-left: 17px;
		padding-top: 2px;
		margin-left: -17px;
		margin-top: -2px;">
	<material-check-box></material-check-box>
</div>
<material-switch></material-switch>
<md-paginator></md-paginator>
<div
		style = "position: relative;
    width: 200px;
    display: flex;
    flex-direction: row-reverse;
    height: 48px;
    padding-right: 31px;">
	<dots-menu settings = "12"></dots-menu>
</div>
<div
		style = "position: relative;
    width: 200px;
    display: flex;
    flex-direction: row-reverse;
    height: 48px;
    padding-right: 31px;">
	<dots-menu></dots-menu>
</div>
<material-combo-box
		multiple
		style = "width: 200px">
	<span>.pdf</span>
	<span selected>.xml</span>
	<span selected>.odt</span>
</material-combo-box>
<item-list></item-list>
<filtrable-search-input id = "SearchInput"
						style = "width: 45vw; position: relative; display: inline-block;"></filtrable-search-input>
</body>
<script type = "text/javascript">

	if(window.Builder.IsImportsSupports & 0)
	{
		alert('грузим старые компоненты');
	}
	else
	{
		window.Builder
			  .EnableWebComponents()
			  .RegisterHtmlTemplate("custom-element.html")
			  .RegisterScript("PolymerValidableInput/PolymerValidableInput.js")
			  .RegisterScript("PolymerCheckBox/PolymerCheckBox.js")
			  .RegisterScript("PolymerMaterialSwitch/PolymerMaterialSwitch.js")
			  .RegisterScript("PolymerPaginator/PolymerPaginator.js")
			  .RegisterScript("PolymerDotsMenu/PolymerDotsMenu.js")
			  .RegisterScript("PolymerComboBox/PolymerComboBox.js")
			  .RegisterScript("PolymerItemList/PolymerItemList.js")
			  .RegisterScript("PolymerFiltrableSearchInput/PolymerFiltrableSearchInput.js")
			  .Build()
			  .AfterAll(() => Initialize());

		//alert('грузим polymer компоненты');
	}

	vi.addEventListener('valueChanged', (args) =>
	{
		console.log(args.detail);
	});

	function Initialize()
	{
		InitializeSearchFilters();
	}

	function InitializeSearchFilters()
	{
		var component = document.createElement('material-combo-box');
		component.style.width = '100%';
		var created = SearchInput.Add('Статусы',
			component)
								 .querySelector('material-combo-box');
		var element = created.Add('все');
		element.dataset.id = null;
		if(!created.SelectedItem)
		{
			element.click();
		}
		element = created.Add(
			'распознан');
		element.dataset.id = 'recognized';
		element = created.Add(
			'не распознан');
		element.dataset.id = 'unrecognized';
		element = created.Add('вручную');
		element.dataset.id = 'manual';

		created.addEventListener('itemSelected',
			(eventArgs) =>
			{
				console.log("status selected");
			});
		var statusesCmbx = created;

		component = document.createElement('material-combo-box');
		component.style.width = '100%';
		created = SearchInput.Add('directions',
			component)
							 .querySelector('material-combo-box');
		element = created.Add('all');
		element.dataset.id = null;
		if(!created.SelectedItem)
		{
			element.click();
		}
		element = created.Add('up');
		element.dataset.id = 'up';
		element = created.Add('down');
		element.dataset.id = 'down';
		element = created.Add('undefined');
		element.dataset.id = 'undefined';

		created.addEventListener('itemSelected',
			(eventArgs) =>
			{
				console.log("direction selected");
			});
		var directionsCmbx = created;

		SearchInput.addEventListener('search', () => console.log('onSearch'));
		SearchInput.addEventListener('valueChanged', (eventArgs) =>
		{
			console.log('Value is: ' + eventArgs.detail);
		});

		var appendInlineStyle =
				(element) =>
				{
					element.style.outline = "none";
					element.style.border = "none";
					element.style.borderBottom = "0.5px solid #757575";
					element.style.fontSize = "16px";
					element.style.fontFamily = "roboto";
					element.style.marginTop = "15px";
					element.style.width = '100%';
				};

		var dateFromChanged =
				(value) =>
				{
					console.log('Date from time is: ' + new Date(value).toJSON());
				};
		var component = document.createElement('input');
		component.setAttribute('type', 'datetime-local');
		component.addEventListener('input', function()
		{
			dateFromChanged(this.value);
		});
		appendInlineStyle(component);
		created = SearchInput.Add('from', component)
							 .querySelector('material-combo-box');
		var dateFrom = SearchInput.FilterComponents[SearchInput.FilterComponents.length - 1].firstChild;

		var dateToChanged =
				(value) =>
				{
					console.log('Date to time is: ' + new Date(value).toJSON());
				};
		component = document.createElement('input');
		component.setAttribute('type', 'datetime-local');
		component.addEventListener('input', function()
		{
			dateToChanged(this.value);
		});
		appendInlineStyle(component);
		created = SearchInput.Add('to', component)
							 .querySelector('material-combo-box');
		var dateTo = SearchInput.FilterComponents[SearchInput.FilterComponents.length - 1].firstChild;

		SearchInput.addEventListener('filterReset',
			() =>
			{
				console.log('filter reseted');
			});
	}


</script>
</html>